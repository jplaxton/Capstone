---
title: "Capstone Project"
author: "John Plaxton"
date: "November 6, 2018"
output:
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(quanteda)
library(readtext)
library(spacyr)
library(tidyverse)
quanteda_options(threads=parallel::detectCores() - 1)
```

## Create a Corpus

Three copora files are provided for the capstone project.  How do I read into R?  The following code answers the questions for the week 1 quiz.

```{r quiz 1 output}
con <- file("./final/en_US/en_US.twitter.txt", "r") 
size<-file.info("./final/en_US/en_US.blogs.txt")
kb<-size$size/1024
mb<-kb/1024
mb
close(con)

twitter <- readLines(con <- file("./final/en_US/en_US.twitter.txt"), encoding = "UTF-8", skipNul = TRUE)
length(twitter)


#Blogs file
blogs<-file("./final/en_US/en_US.blogs.txt","r")
blogs_lines<-readLines(blogs)
close(blogs)
summary(nchar(blogs_lines))

# News file
news<-file("./final/en_US/en_US.news.txt","r")
news_lines<-readLines(news)
close(news)
summary(nchar(news_lines))

# Twitter file
twitter<-file("./final/en_US/en_US.twitter.txt","r")
twitter_lines<-readLines(twitter)
close(twitter)
summary(nchar(twitter_lines))

love<-length(grep("love", twitter_lines))
hate<-length(grep("hate", twitter_lines))
love/hate

grep("biostats", twitter_lines, value = T)

grep("A computer once beat me at chess, but it was no match for me at kickboxing", twitter_lines)


con <- file("./final/en_US/en_US.twitter.txt", "r") 
readLines(con, 1) ## Read the first line of text 
readLines(con, 1) ## Read the next line of text 
readLines(con, 5) ## Read in the next 5 lines of text 
close(con) ## It's important to close the connection when you are done

```

## Create a Corpus

Create a Corpus from the provided .txt files...

Translating unstructured content from a corpus of information into a meaningful knowledge base is the task of NLP.  It is important to determine what information to keep and how to look for patterns in the structure of that information to distill meaning and context.

```{r create_corpus}
textin <- readtext("./final/en_US/*.txt")
my_corpus <- corpus(textin)
metadoc(my_corpus, "language") <- "english"
summary(my_corpus, showmeta = TRUE)

```

```{r cleanup}
quanteda_options(threads=2)
```